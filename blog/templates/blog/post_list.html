{% extends 'blog/base.html' %}
{% block head_title %}레시피 목록{% endblock %}
{% block main_area %}
<!-- Featured blog post-->
<header class="bg-light py-1">
    <div class="container px-5">
        <div class="row row-cols-1 row-cols-sm-1 row-cols-md-1 gx-5 align-items-center">
            <div class="col-lg-5 col-xl-5 col-xxl-5">
                <div class="my-5 text-start">
                    <h1 class="display-5 fw-bolder text-black mb-2">오늘뭐먹지</h1>
                    <p class="fw-normal fs-4">오늘 뭐 먹을지 고민이라면</p>
                    {% for p in recipe_list %}
                    <p>나와라 {{ p.title }} 나와라</p>
                    {% endfor %}
                    <p class="lead fw-normal text-black-50 mb-4 fs-6">멀리 그러나 남은 무성할 아스라히 걱정도 새겨지는 소녀들의 애기 있습니다.
                        나의 묻힌 어머님, 이름과, 언덕 아이들의 노새, 어머니, 계집애들의 봅니다.
                        언덕 어머니, 다 딴은 까닭이요, 시와 듯합니다. 시인의 잠, 멀리 마디씩 소녀들의 다하지 봅니다.
                        아름다운 잔디가 잠, 까닭입니다. 마디씩 가난한 계절이 까닭이요, 이국 둘 있습니다.</p>
                        {% if user.is_authenticated %}
                        <a class="btn btn-info btn-sm float-right" href="/blog/create_post/" role="button">
                            <i class="fa-solid fa-pen-nib"></i>&nbsp;&nbsp;New Post</a>
                        {% endif %}
                </div>
            </div>
            <!--로그인 창-->
            {% if post_list.exists %}
            {% for p in post_list %}
            <div class="card mb-4" id="post-{{ p.pk }}">
                <a href="{{ p.get_absolute_url }}">
                    <!-- 이미지가 들어오면 이미지를 표시, 아니면 대체이미지 표시 -->
                    {% if p.head_image %}
                    <img class="card-img-top" src="{{ p.head_image.url }}" alt="..." />
                    {% else %}
                    <img class="card-img-top" src="https://picsum.photos/seed/{{ p.id }}/850/350/?blur=10" alt="..." />
                    {% endif %}
                </a>
                <div class="card-body">
                    {% if p.category %}
                    <div class="text-end"><span class="badge bg-secondary float-right">{{ p.category }}</span></div>
                    {% else %}<div class="text-end"><span class="badge bg-secondary float-right">미분류</span></div>
                    {% endif %}<h2 class="card-title">{{ p.title }}</h2>
                    {% if p.hook_text %}<h5 class="text-muted">{{ p.hook_text }}</h5>{% endif %}
                    <p class="card-text">{{ p.content | truncatewords:45}}</p>

                    {% if p.tags.exists %}<i class="fa-solid fa-tags"></i>
                    {% for tag in p.tags.iterator %}
                    <a href="{{ tag.get_absolute_url }}">
                        <span class="badge text-bg-secondary">{{ tag }}</span>
                    </a>
                    {% endfor %}
                    {% endif %}
                    <a class="btn btn-primary" href="{{ p.get_absolute_url }}">Read more →</a>
                </div>
                <div class="card-footer text-muted">
                    <div class="small text-muted fst-italic mb-2">Posted on {{ p.created_at }} by
                        <a href="#">{{ p.author | upper }}</a>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <h3>아직 게시물이 없습니다.</h3>
            {% endif %}
            <!--로그인 창--->
        </div>
    </div>
</header>
<!-- 페이지네이션 -->
{% if is_paginated %}
<ul class="pagination justify-content-center mb-4">
    {% if page_obj.has_next %}
    <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">Previous</a>
    </li>
    {% else %}
    <li class="page-item disabled">
        <a class="page-link" href="#">Previous</a>
    </li>
    {% endif %}
    {% if page_obj.has_previous %}
    <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Next</a>
    </li>
    {% else %}
    <li class="page-item disabled">
        <a class="page-link" href="#">Next</a>
    </li>
    {% endif %}
</ul>
{% endif %}

{% endblock %}